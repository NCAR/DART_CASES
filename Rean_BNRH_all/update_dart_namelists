#!/bin/sh

# This script makes certain namelist settings consistent with the number
# of ensemble members built by the setup script.
# This script was autogenerated by ./DART_config using the variables set in that script.

# Ensure that the input.nml ensemble size matches the number of instances.
# WARNING: the output files contain ALL ensemble members ==> BIG

ex input.nml <<ex_end
g;ens_size ;s;= .*;= 80;
g;num_output_state_members ;s;= .*;= 80;
# g;num_output_obs_members ;s;= .*;= 80;
wq
ex_end

if [[ "false" = "true" ]]; then 
   list=`grep '^[ ]*vertical_localization_coord' input.nml | sed -e "s#[=,]##g"`
   if [[ "$list[3]" = "SCALEHEIGHT" ]]; then
      list=   vert_normalization_scale_height  1.5
      if [[ "$list[2]" != "1.5" ]]; then
         echo "WARNING!  input.nml is not using 1.5 for vert_normalization_scale_height."
         echo "          Use a different value only if you definitely want to. "
      fi
   else
      echo "WARNING!  input.nml is not using SCALEHEIGHT for vertical_localization_coord."
      echo "          SCALEHEIGHT is highly recommended for WACCM{-X}"
   fi
else
   echo "This model is not configured for WACCM"
   echo "COMPSET is HIST_CAM60_CLM50%BGC-CROP_CICE%PRES_DOCN%DOM_MOSART_SGLC_SWAV_SIAC_SESP"
fi

exit 0

