#!/bin/sh

# Run this script in the /glade/work/raeder/Exp/f.e21.FHIST_BGC.f09_025.CAM6assim.011 directory.
# This script copies over the dart executables and POSSIBLY a namelist
# to the proper directory.  If you have to update any dart executables,
# do it in the /glade/u/home/raeder/DART/reanalysis directory and then rerun stage_dart_files.
# If an input.nml does not exist in the /glade/work/raeder/Exp/f.e21.FHIST_BGC.f09_025.CAM6assim.011 directory,
# a default one will be copied into place.
#
# This script was autogenerated by ./DART_config using the variables set in that script.

if [[ -e input.nml ]]; then
   echo "stage_dart_files: Using existing /glade/work/raeder/Exp/f.e21.FHIST_BGC.f09_025.CAM6assim.011/input.nml"
   if [[ -e input.nml.original ]]; then
      echo "input.nml.original already exists - not making another"
   else
      /usr/bin/cp --preserve=timestamps -v input.nml input.nml.original
   fi

elif [[ -e /glade/u/home/raeder/DART/reanalysis/models/cam-fv/work/input.nml ]]; then
   /usr/bin/cp --preserve=timestamps -v /glade/u/home/raeder/DART/reanalysis/models/cam-fv/work/input.nml  input.nml
   if [[ -x update_dart_namelists ]]; then
          ./update_dart_namelists
   fi
else
   echo "ERROR: stage_dart_files could not find an input.nml.  Aborting"
   exit 50
fi

/usr/bin/cp --preserve=timestamps -f /glade/u/home/raeder/DART/reanalysis/models/cam-fv/work/filter                 /glade/scratch/raeder/f.e21.FHIST_BGC.f09_025.CAM6assim.011/bld || exit 55
/usr/bin/cp --preserve=timestamps -f /glade/u/home/raeder/DART/reanalysis/models/cam-fv/work/perfect_model_obs      /glade/scratch/raeder/f.e21.FHIST_BGC.f09_025.CAM6assim.011/bld || exit 56
/usr/bin/cp --preserve=timestamps -f /glade/u/home/raeder/DART/reanalysis/models/cam-fv/work/fill_inflation_restart /glade/scratch/raeder/f.e21.FHIST_BGC.f09_025.CAM6assim.011/bld || exit 57

exit 0

